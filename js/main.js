"use strict";function handleEnter(){this.classList.contains("item-1")&&(content[1].classList.remove("visable-1","visable-2"),content[2].classList.remove("visable-1","visable-2"),content[0].classList.add("visable-1"),setTimeout(function(){return content[0].classList.add("visable-2")},150)),this.classList.contains("item-2")&&(content[0].classList.remove("visable-1","visable-2"),content[2].classList.remove("visable-1","visable-2"),content[1].classList.add("visable-1"),setTimeout(function(){return content[1].classList.add("visable-2")},150)),this.classList.contains("item-3")&&(content[0].classList.remove("visable-1","visable-2"),content[1].classList.remove("visable-1","visable-2"),content[2].classList.add("visable-1"),setTimeout(function(){return content[2].classList.add("visable-2")},150))}function changeIcon(e,t){var n=document.querySelector(".content-1 .condition-icon");e>0&&t<0?701===data1.weather[0].id?(n.classList.remove(n.classList.item(2)),n.classList.add("wi-day-fog")):(n.classList.remove(n.classList.item(2)),n.classList.add("wi-owm-day-"+data1.weather[0].id)):701===data1.weather[0].id?(n.classList.remove(n.classList.item(2)),n.classList.add("wi-night-fog")):(n.classList.remove(n.classList.item(2)),n.classList.add("wi-owm-night-"+data1.weather[0].id))}function getLocalTime(e,t){var n=t?new Date(1e3*t):new Date,i=n.getTime()+6e4*n.getTimezoneOffset();return new Date(i+e/3600*36e5)}function displayInfo1(){var e=new Intl.DateTimeFormat("en-GB",{timezone:"UTC",weekday:"long",month:"long",day:"numeric",hour:"numeric",minute:"numeric"}),t=new Intl.DateTimeFormat("en-GB",{timezone:"UTC",hour:"numeric",minute:"numeric"});document.querySelector(".content-1 .date").innerHTML=e.format(getLocalTime(gmtOffset)),document.querySelector(".content-1 .sunrise").innerHTML=t.format(getLocalTime(gmtOffset,data1.sys.sunrise)),document.querySelector(".content-1 .sunset").innerHTML=t.format(getLocalTime(gmtOffset,data1.sys.sunset)),document.querySelector(".content-1 .current-temp").innerHTML=Math.round(data1.main.temp),document.querySelector(".content-1 .humidity").innerHTML=data1.main.humidity,document.querySelector(".content-1 .cloudiness").innerHTML=data1.clouds.all,document.querySelector(".content-1 .wind").innerHTML=Math.round(10*data1.wind.speed)/10,document.querySelector(".content-1 .pressure").innerHTML=Math.round(.75*data1.main.pressure),data1.weather[0].description.split(" ").length>2?(data1.weather[0].main=data1.weather[0].main[0].toLowerCase()+data1.weather[0].main.substr(1),document.querySelector(".content-1 .condition-description").innerHTML=data1.weather[0].main):document.querySelector(".content-1 .condition-description").innerHTML=data1.weather[0].description,changeIcon(getLocalTime(gmtOffset).valueOf()-getLocalTime(gmtOffset,data1.sys.sunrise).valueOf(),getLocalTime(gmtOffset).valueOf()-getLocalTime(gmtOffset,data1.sys.sunset).valueOf())}function getWeather1(){var e=endpoint2+"&lat="+window.latitude+"&lon="+window.longitude;fetch(proxy+e).then(function(e){return e.json()}).then(function(e){return data1=e}).then(displayInfo1)}function start(){var e=endpoint1+"&lat="+window.latitude+"&lng="+window.longitude;fetch(e).then(function(e){return e.json()}).then(function(e){return window.gmtOffset=e.gmtOffset}).then(getWeather1).then(getWeather2).then(getWeather3).catch(start)}function displayInfo2(){weaterList.forEach(function(e,t){var n=document.querySelector(".content-2 .item-"+(t+1)),i=n.querySelector(".condition-icon");n.querySelector(".time").innerHTML=e.time,n.querySelector(".temp").innerHTML=Math.round(e.main.temp),n.querySelector(".humidity").innerHTML=e.main.humidity,n.querySelector(".pressure").innerHTML=Math.round(.75*e.main.pressure),n.querySelector(".wind").innerHTML=Math.round(10*e.wind.speed)/10,e.weather[0].description.split(" ").length>2?(e.weather[0].main=e.weather[0].main[0].toLowerCase()+e.weather[0].main.substr(1),n.querySelector(".condition-description").innerHTML=e.weather[0].main):n.querySelector(".condition-description").innerHTML=e.weather[0].description,e.class=e.time.indexOf("Morning")!==-1||e.time.indexOf("Day")!==-1?"wi-owm-day-":"wi-owm-night-",701===e.weather[0].id?(i.classList.remove(i.classList.item(2)),"wi-owm-day-"===e.class?i.classList.add("wi-day-fog"):i.classList.add("wi-night-fog")):(i.classList.remove(i.classList.item(2)),i.classList.add(e.class+e.weather[0].id))})}function parseWeatherData(){var e=void 0,t=void 0,n=void 0,i=void 0;data2.forEach(function(o){var a=getLocalTime(window.gmtOffset,o.dt);7!=a.getHours()&&8!=a.getHours()&&9!=a.getHours()&&10!=a.getHours()||(e=o),13!=a.getHours()&&14!=a.getHours()&&15!=a.getHours()&&16!=a.getHours()||(t=o),19!=a.getHours()&&20!=a.getHours()&&21!=a.getHours()&&22!=a.getHours()||(n=o),1!=a.getHours()&&2!=a.getHours()&&3!=a.getHours()&&4!=a.getHours()||(i=o)});var o=getLocalTime(gmtOffset).getHours();o>=0&&o<7&&(weaterList[0]=e,weaterList[0].time="This Morning",weaterList[1]=t,weaterList[1].time="This Day",weaterList[2]=n,weaterList[2].time="This Evening",weaterList[3]=i,weaterList[3].time="Tomorrow Night"),o>=7&&o<13&&(weaterList[0]=t,weaterList[0].time="This Day",weaterList[1]=n,weaterList[1].time="This Evening",weaterList[2]=i,weaterList[2].time="Tomorrow Night",weaterList[3]=e,weaterList[3].time="Tomorrow Morning"),o>=13&&o<19&&(weaterList[0]=n,weaterList[0].time="This Evening",weaterList[1]=i,weaterList[1].time="Tomorrow Night",weaterList[2]=e,weaterList[2].time="Tomorrow Morning",weaterList[3]=t,weaterList[3].time="Tomorrow Day"),o>=19&&o<=23&&(weaterList[0]=i,weaterList[0].time="Tomorrow Night",weaterList[1]=e,weaterList[1].time="Tomorrow Morning",weaterList[2]=t,weaterList[2].time="Tomorrow Day",weaterList[3]=n,weaterList[3].time="Tomorrow Evening")}function getWeather2(){var e=endpoint3+"&lat="+window.latitude+"&lon="+window.longitude;fetch(proxy+e).then(function(e){return e.json()}).then(function(e){return data2=e.list}).then(parseWeatherData).then(displayInfo2)}function displayInfo3(){var e=new Intl.DateTimeFormat("en-GB",{timezone:"UTC",weekday:"long",month:"long",day:"numeric"});data3.shift(),data3.forEach(function(t,n){var i=document.querySelector(".content-3 .item-"+(n+1)),o=getLocalTime(window.gmtOffset,t.dt),a=e.format(o).split(" ");i.querySelector(".day").innerHTML=a[0]+", "+a[1]+" "+a[2],i.querySelector(".max-temp").innerHTML=Math.round(t.temp.max),i.querySelector(".min-temp").innerHTML=Math.round(t.temp.min),i.querySelector(".pressure").innerHTML=Math.round(.75*t.pressure),i.querySelector(".cloudiness").innerHTML=t.clouds,i.querySelector(".wind").innerHTML=Math.round(10*t.speed)/10,t.weather[0].description.split(" ").length>2?(t.weather[0].main=t.weather[0].main[0].toLowerCase()+t.weather[0].main.substr(1),i.querySelector(".condition-description").innerHTML=t.weather[0].main):i.querySelector(".condition-description").innerHTML=t.weather[0].description;var r=i.querySelector(".condition-icon");701===t.weather[0].id?(r.classList.remove(r.classList.item(2)),r.classList.add("wi-fog")):(r.classList.remove(r.classList.item(2)),r.classList.add("wi-owm-"+t.weather[0].id))})}function getWeather3(){var e=endpoint4+"&lat="+window.latitude+"&lon="+window.longitude;fetch(proxy+e).then(function(e){return e.json()}).then(function(e){return data3=e.list}).then(displayInfo3)}function init(){var e=new google.maps.places.Autocomplete(input,t),t={types:["(cities)"]};e.addListener("place_changed",function(){var t=e.getPlace();t.address_components.forEach(function(e){"locality"!=e.types[0]&&"locality"!=e.types[1]&&"locality"!=e.types[2]||(document.querySelector(".content-1 .city").innerHTML=e.short_name,"SF"==e.short_name&&(document.querySelector(".content-1 .city").innerHTML="San Francisco")),"country"!=e.types[0]&&"country"!=e.types[1]&&"country"!=e.types[2]||(document.querySelector(".content-1 .country").innerHTML=e.long_name)}),window.latitude=t.geometry.location.lat(),window.longitude=t.geometry.location.lng(),start()})}var navItems=document.querySelectorAll(".nav-list > li"),content=document.querySelectorAll(".content");[].slice.call(navItems).forEach(function(e){return e.addEventListener("mouseenter",handleEnter)});var endpoint1="https://api.timezonedb.com/v2/get-time-zone?by=position&format=json&key=OJMUUIXHQRR0",endpoint2="http://api.openweathermap.org/data/2.5/weather?APPID=7f6619394d62483e856ea81df3979f97&units=metric";window.proxy="https://cors-anywhere.herokuapp.com/",window.latitude="37.77493",window.longitude="-122.41942";var data1=void 0;start();var endpoint3="http://api.openweathermap.org/data/2.5/forecast?APPID=7f6619394d62483e856ea81df3979f97&cnt=8&units=metric",weaterList=[],data2=void 0,endpoint4="http://api.openweathermap.org/data/2.5/forecast/daily?units=metric&cnt=7&appid=7f6619394d62483e856ea81df3979f97",data3=void 0,input=document.querySelector(".city-search"),geoBtn=document.querySelector(".geo-button");input.addEventListener("focus",function(){return input.select()}),geoBtn.addEventListener("click",function(e){"geolocation"in navigator?navigator.geolocation.getCurrentPosition(function(e){input.value="",window.latitude=e.coords.latitude,window.longitude=e.coords.longitude,fetch("https://maps.googleapis.com/maps/api/geocode/json?key=AIzaSyDd3QGZaj-bTDmV7pfJHhn5uSLCaX1UPC8&language=en&latlng="+e.coords.latitude+","+e.coords.longitude).then(function(e){return e.json()}).then(function(e){e.results[3].address_components.forEach(function(e){"locality"!=e.types[0]&&"locality"!=e.types[1]&&"locality"!=e.types[2]||("SF"==e.short_name?document.querySelector(".content-1 .city").innerHTML="San Francisco":document.querySelector(".content-1 .city").innerHTML=e.short_name),"country"!=e.types[0]&&"country"!=e.types[1]&&"country"!=e.types[2]||(document.querySelector(".content-1 .country").innerHTML=e.long_name)})}).then(start)}):alert("Sorry, geolocation is not available")});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdDEuanMiLCJzY3JpcHQyLmpzIiwic2NyaXB0My5qcyIsInNjcmlwdDQuanMiLCJzY3JpcHQ1LmpzIl0sIm5hbWVzIjpbImhhbmRsZUVudGVyIiwidGhpcyIsImNsYXNzTGlzdCIsImNvbnRhaW5zIiwiY29udGVudCIsInJlbW92ZSIsImFkZCIsInNldFRpbWVvdXQiLCJjaGFuZ2VJY29uIiwic3VucmlzZSIsInN1bnNldCIsImljb24iLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJkYXRhMSIsIndlYXRoZXIiLCJpZCIsIml0ZW0iLCJnZXRMb2NhbFRpbWUiLCJvZmZzZXQiLCJ0aW1lIiwiZCIsIkRhdGUiLCJ1dGMiLCJnZXRUaW1lIiwiZ2V0VGltZXpvbmVPZmZzZXQiLCJkaXNwbGF5SW5mbzEiLCJmb3JtYXR0ZXIxIiwiSW50bCIsIkRhdGVUaW1lRm9ybWF0IiwidGltZXpvbmUiLCJ3ZWVrZGF5IiwibW9udGgiLCJkYXkiLCJob3VyIiwibWludXRlIiwiZm9ybWF0dGVyMiIsImlubmVySFRNTCIsImZvcm1hdCIsImdtdE9mZnNldCIsInN5cyIsIk1hdGgiLCJyb3VuZCIsIm1haW4iLCJ0ZW1wIiwiaHVtaWRpdHkiLCJjbG91ZHMiLCJhbGwiLCJ3aW5kIiwic3BlZWQiLCJwcmVzc3VyZSIsImRlc2NyaXB0aW9uIiwic3BsaXQiLCJsZW5ndGgiLCJ0b0xvd2VyQ2FzZSIsInN1YnN0ciIsInZhbHVlT2YiLCJnZXRXZWF0aGVyMSIsImVuZHBvaW50IiwiZW5kcG9pbnQyIiwid2luZG93IiwibGF0aXR1ZGUiLCJsb25naXR1ZGUiLCJmZXRjaCIsInByb3h5IiwidGhlbiIsInJlc3BvbnNlIiwianNvbiIsImRhdGEiLCJzdGFydCIsImVuZHBvaW50MSIsImdldFdlYXRoZXIyIiwiZ2V0V2VhdGhlcjMiLCJjYXRjaCIsImRpc3BsYXlJbmZvMiIsIndlYXRlckxpc3QiLCJmb3JFYWNoIiwiaSIsImVsZW1lbnQiLCJjbGFzcyIsImluZGV4T2YiLCJwYXJzZVdlYXRoZXJEYXRhIiwibW9ybmluZ1dlYXRoZXJJbmZvIiwiZGF5V2VhdGhlckluZm8iLCJldmVuaW5nV2VhdGhlckluZm8iLCJuaWdodFdlYXRoZXJJbmZvIiwiZGF0YTIiLCJkdCIsImdldEhvdXJzIiwiY3VycmVudFRpbWUiLCJlbmRwb2ludDMiLCJsaXN0IiwiZGlzcGxheUluZm8zIiwiZm9ybWF0dGVyIiwiZGF0YTMiLCJzaGlmdCIsImRhdGUiLCJkYXRlQXJyYXkiLCJtYXgiLCJtaW4iLCJlbmRwb2ludDQiLCJpbml0IiwiYXV0b2NvbXBsZXRlIiwiZ29vZ2xlIiwibWFwcyIsInBsYWNlcyIsIkF1dG9jb21wbGV0ZSIsImlucHV0Iiwib3B0aW9ucyIsInR5cGVzIiwiYWRkTGlzdGVuZXIiLCJwbGFjZSIsImdldFBsYWNlIiwiYWRkcmVzc19jb21wb25lbnRzIiwic2hvcnRfbmFtZSIsImxvbmdfbmFtZSIsImdlb21ldHJ5IiwibG9jYXRpb24iLCJsYXQiLCJsbmciLCJuYXZJdGVtcyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJzbGljZSIsImNhbGwiLCJhZGRFdmVudExpc3RlbmVyIiwiZ2VvQnRuIiwic2VsZWN0IiwiZSIsIm5hdmlnYXRvciIsImdlb2xvY2F0aW9uIiwiZ2V0Q3VycmVudFBvc2l0aW9uIiwicG9zaXRpb24iLCJ2YWx1ZSIsImNvb3JkcyIsInJlc3VsdHMiLCJhbGVydCJdLCJtYXBwaW5ncyI6IllBR0EsU0FBU0EsZUFDSEMsS0FBS0MsVUFBVUMsU0FBUyxZQUMxQkMsUUFBUSxHQUFHRixVQUFVRyxPQUFPLFlBQWEsYUFDekNELFFBQVEsR0FBR0YsVUFBVUcsT0FBTyxZQUFhLGFBRXpDRCxRQUFRLEdBQUdGLFVBQVVJLElBQUksYUFDekJDLFdBQVcsV0FBQSxNQUFNSCxTQUFRLEdBQUdGLFVBQVVJLElBQUksY0FBYyxNQUd0REwsS0FBS0MsVUFBVUMsU0FBUyxZQUMxQkMsUUFBUSxHQUFHRixVQUFVRyxPQUFPLFlBQWEsYUFDekNELFFBQVEsR0FBR0YsVUFBVUcsT0FBTyxZ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WXFFLEVBQVNFLE9BQU92RSxVQUVuQ0MsTUFBQUEsb0hBQTBIb0UsRUFBU0UsT0FBT3hFLFNBQTFJLElBQXNKc0UsRUFBU0UsT0FBT3ZFLFdBQ25LRyxLQUFLLFNBQUFDLEdBQUEsTUFBWUEsR0FBU0MsU0FDMUJGLEtBQUssU0FBQ0csR0FDTEEsRUFBS2tFLFFBQVEsR0FBR3JCLG1CQUFtQnJDLFFBQVEsU0FBQzNELEdBQ3JCLFlBQWpCQSxFQUFLNEYsTUFBTSxJQUFxQyxZQUFqQjVGLEVBQUs0RixNQUFNLElBQXFDLFlBQWpCNUYsRUFBSzRGLE1BQU0sS0FDcEQsTUFBbkI1RixFQUFLaUcsV0FDUHRHLFNBQVNDLGNBQWMsb0JBQW9Cd0IsVUFBWSxnQkFFdkR6QixTQUFTQyxjQUFjLG9CQUFvQndCLFVBQVlwQixFQUFLaUcsWUFJM0MsV0FBakJqRyxFQUFLNEYsTUFBTSxJQUFvQyxXQUFqQjVGLEVBQUs0RixNQUFNLElBQW9DLFdBQWpCNUYsRUFBSzRGLE1BQU0sS0FDekVqRyxTQUFTQyxjQUFjLHVCQUF1QndCLFVBQVlwQixFQUFLa0csZUFJcEVsRCxLQUFLSSxTQUdWa0UsTUFBTSIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgbmF2SXRlbXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubmF2LWxpc3QgPiBsaScpO1xyXG5jb25zdCBjb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNvbnRlbnQnKTtcclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUVudGVyKCkge1xyXG4gIGlmICh0aGlzLmNsYXNzTGlzdC5jb250YWlucygnaXRlbS0xJykpIHtcclxuICAgIGNvbnRlbnRbMV0uY2xhc3NMaXN0LnJlbW92ZSgndmlzYWJsZS0xJywgJ3Zpc2FibGUtMicpO1xyXG4gICAgY29udGVudFsyXS5jbGFzc0xpc3QucmVtb3ZlKCd2aXNhYmxlLTEnLCAndmlzYWJsZS0yJyk7XHJcblxyXG4gICAgY29udGVudFswXS5jbGFzc0xpc3QuYWRkKCd2aXNhYmxlLTEnKTtcclxuICAgIHNldFRpbWVvdXQoKCkgPT4gY29udGVudFswXS5jbGFzc0xpc3QuYWRkKCd2aXNhYmxlLTInKSwgMTUwKTtcclxuICB9XHJcblxyXG4gIGlmICh0aGlzLmNsYXNzTGlzdC5jb250YWlucygnaXRlbS0yJykpIHtcclxuICAgIGNvbnRlbnRbMF0uY2xhc3NMaXN0LnJlbW92ZSgndmlzYWJsZS0xJywgJ3Zpc2FibGUtMicpO1xyXG4gICAgY29udGVudFsyXS5jbGFzc0xpc3QucmVtb3ZlKCd2aXNhYmxlLTEnLCAndmlzYWJsZS0yJyk7XHJcblxyXG4gICAgY29udGVudFsxXS5jbGFzc0xpc3QuYWRkKCd2aXNhYmxlLTEnKTtcclxuICAgIHNldFRpbWVvdXQoKCkgPT4gY29udGVudFsxXS5jbGFzc0xpc3QuYWRkKCd2aXNhYmxlLTInKSwgMTUwKTtcclxuICB9XHJcblxyXG4gIGlmICh0aGlzLmNsYXNzTGlzdC5jb250YWlucygnaXRlbS0zJykpIHtcclxuICAgIGNvbnRlbnRbMF0uY2xhc3NMaXN0LnJlbW92ZSgndmlzYWJsZS0xJywgJ3Zpc2FibGUtMicpO1xyXG4gICAgY29udGVudFsxXS5jbGFzc0xpc3QucmVtb3ZlKCd2aXNhYmxlLTEnLCAndmlzYWJsZS0yJyk7XHJcblxyXG4gICAgY29udGVudFsyXS5jbGFzc0xpc3QuYWRkKCd2aXNhYmxlLTEnKTtcclxuICAgIHNldFRpbWVvdXQoKCkgPT4gY29udGVudFsyXS5jbGFzc0xpc3QuYWRkKCd2aXNhYmxlLTInKSwgMTUwKTtcclxuICB9XHJcbn1cclxuXHJcbltdLnNsaWNlLmNhbGwobmF2SXRlbXMpLmZvckVhY2goaXRlbSA9PiBpdGVtLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZW50ZXInLCBoYW5kbGVFbnRlcikpO1xyXG4iLCJjb25zdCBlbmRwb2ludDEgPSAnaHR0cHM6Ly9hcGkudGltZXpvbmVkYi5jb20vdjIvZ2V0LXRpbWUtem9uZT9ieT1wb3NpdGlvbiZmb3JtYXQ9anNvbiZrZXk9T0pNVVVJWEhRUlIwJztcclxuY29uc3QgZW5kcG9pbnQyID0gJ2h0dHA6Ly9hcGkub3BlbndlYXRoZXJtYXAub3JnL2RhdGEvMi41L3dlYXRoZXI/QVBQSUQ9N2Y2NjE5Mzk0ZDYyNDgzZTg1NmVhODFkZjM5NzlmOTcmdW5pdHM9bWV0cmljJztcclxuXHJcbndpbmRvdy5wcm94eSA9ICdodHRwczovL2NvcnMtYW55d2hlcmUuaGVyb2t1YXBwLmNvbS8nO1xyXG53aW5kb3cubGF0aXR1ZGUgPSAnMzcuNzc0OTMnO1xyXG53aW5kb3cubG9uZ2l0dWRlID0gJy0xMjIuNDE5NDInO1xyXG5cclxubGV0IGRhdGExO1xyXG5cclxuZnVuY3Rpb24gY2hhbmdlSWNvbihzdW5yaXNlLCBzdW5zZXQpIHtcclxuICBjb25zdCBpY29uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbnRlbnQtMSAuY29uZGl0aW9uLWljb24nKTtcclxuXHJcbiAgaWYgKHN1bnJpc2UgPiAwICYmIHN1bnNldCA8IDApIHtcclxuICAgIGlmIChkYXRhMS53ZWF0aGVyWzBdLmlkID09PSA3MDEpIHtcclxuICAgICAgaWNvbi5jbGFzc0xpc3QucmVtb3ZlKGljb24uY2xhc3NMaXN0Lml0ZW0oMikpO1xyXG4gICAgICBpY29uLmNsYXNzTGlzdC5hZGQoJ3dpLWRheS1mb2cnKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGljb24uY2xhc3NMaXN0LnJlbW92ZShpY29uLmNsYXNzTGlzdC5pdGVtKDIpKTtcclxuICAgICAgaWNvbi5jbGFzc0xpc3QuYWRkKCd3aS1vd20tZGF5LScgKyBkYXRhMS53ZWF0aGVyWzBdLmlkKTtcclxuICAgIH1cclxuICB9IGVsc2Uge1xyXG4gICAgaWYgKGRhdGExLndlYXRoZXJbMF0uaWQgPT09IDcwMSkge1xyXG4gICAgICBpY29uLmNsYXNzTGlzdC5yZW1vdmUoaWNvbi5jbGFzc0xpc3QuaXRlbSgyKSk7XHJcbiAgICAgIGljb24uY2xhc3NMaXN0LmFkZCgnd2ktbmlnaHQtZm9nJyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBpY29uLmNsYXNzTGlzdC5yZW1vdmUoaWNvbi5jbGFzc0xpc3QuaXRlbSgyKSk7XHJcbiAgICAgIGljb24uY2xhc3NMaXN0LmFkZCgnd2ktb3dtLW5pZ2h0LScgKyBkYXRhMS53ZWF0aGVyWzBdLmlkKTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldExvY2FsVGltZShvZmZzZXQsIHRpbWUpIHtcclxuICAgIGNvbnN0IGQgPSAodGltZSkgPyBuZXcgRGF0ZSh0aW1lICogMTAwMCkgOiBuZXcgRGF0ZSgpO1xyXG4gICAgY29uc3QgdXRjID0gZC5nZXRUaW1lKCkgKyAoZC5nZXRUaW1lem9uZU9mZnNldCgpICogNjAwMDApO1xyXG5cclxuICAgIHJldHVybiBuZXcgRGF0ZSh1dGMgKyAoMzYwMDAwMCAqIChvZmZzZXQgLyAzNjAwKSkpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBkaXNwbGF5SW5mbzEoKSB7XHJcbiAgY29uc3QgZm9ybWF0dGVyMSA9IG5ldyBJbnRsLkRhdGVUaW1lRm9ybWF0KCdlbi1HQicsIHtcclxuICAgIHRpbWV6b25lOiAnVVRDJyxcclxuICAgIHdlZWtkYXk6ICdsb25nJyxcclxuICAgIG1vbnRoOiAnbG9uZycsXHJcbiAgICBkYXk6ICdudW1lcmljJyxcclxuICAgIGhvdXI6ICdudW1lcmljJyxcclxuICAgIG1pbnV0ZTogJ251bWVyaWMnXHJcbiAgfSk7XHJcblxyXG4gIGNvbnN0IGZvcm1hdHRlcjIgPSBuZXcgSW50bC5EYXRlVGltZUZvcm1hdCgnZW4tR0InLCB7XHJcbiAgICB0aW1lem9uZTogJ1VUQycsXHJcbiAgICBob3VyOiAnbnVtZXJpYycsXHJcbiAgICBtaW51dGU6ICdudW1lcmljJ1xyXG4gIH0pO1xyXG5cclxuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29udGVudC0xIC5kYXRlJykuaW5uZXJIVE1MID0gZm9ybWF0dGVyMS5mb3JtYXQoZ2V0TG9jYWxUaW1lKGdtdE9mZnNldCkpO1xyXG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb250ZW50LTEgLnN1bnJpc2UnKS5pbm5lckhUTUwgPSBmb3JtYXR0ZXIyLmZvcm1hdChnZXRMb2NhbFRpbWUoZ210T2Zmc2V0LCBkYXRhMS5zeXMuc3VucmlzZSkpO1xyXG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb250ZW50LTEgLnN1bnNldCcpLmlubmVySFRNTCA9IGZvcm1hdHRlcjIuZm9ybWF0KGdldExvY2FsVGltZShnbXRPZmZzZXQsIGRhdGExLnN5cy5zdW5zZXQpKTtcclxuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29udGVudC0xIC5jdXJyZW50LXRlbXAnKS5pbm5lckhUTUwgPSBNYXRoLnJvdW5kKGRhdGExLm1haW4udGVtcCk7XHJcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbnRlbnQtMSAuaHVtaWRpdHknKS5pbm5lckhUTUwgPSBkYXRhMS5tYWluLmh1bWlkaXR5O1xyXG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb250ZW50LTEgLmNsb3VkaW5lc3MnKS5pbm5lckhUTUwgPSBkYXRhMS5jbG91ZHMuYWxsO1xyXG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb250ZW50LTEgLndpbmQnKS5pbm5lckhUTUwgPSBNYXRoLnJvdW5kKGRhdGExLndpbmQuc3BlZWQgKiAxMCkgLyAxMDtcclxuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29udGVudC0xIC5wcmVzc3VyZScpLmlubmVySFRNTCA9IE1hdGgucm91bmQoZGF0YTEubWFpbi5wcmVzc3VyZSAqIDAuNzUpO1xyXG5cclxuICBpZiAoZGF0YTEud2VhdGhlclswXS5kZXNjcmlwdGlvbi5zcGxpdCgnICcpLmxlbmd0aCA+IDIpIHtcclxuICAgIGRhdGExLndlYXRoZXJbMF0ubWFpbiA9IGRhdGExLndlYXRoZXJbMF0ubWFpblswXS50b0xvd2VyQ2FzZSgpICsgZGF0YTEud2VhdGhlclswXS5tYWluLnN1YnN0cigxKTtcclxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb250ZW50LTEgLmNvbmRpdGlvbi1kZXNjcmlwdGlvbicpLmlubmVySFRNTCA9IGRhdGExLndlYXRoZXJbMF0ubWFpbjtcclxuICB9IGVsc2Uge1xyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbnRlbnQtMSAuY29uZGl0aW9uLWRlc2NyaXB0aW9uJykuaW5uZXJIVE1MID0gZGF0YTEud2VhdGhlclswXS5kZXNjcmlwdGlvbjtcclxuICB9XHJcblxyXG4gIGNoYW5nZUljb24oZ2V0TG9jYWxUaW1lKGdtdE9mZnNldCkudmFsdWVPZigpIC0gZ2V0TG9jYWxUaW1lKGdtdE9mZnNldCwgZGF0YTEuc3lzLnN1bnJpc2UpLnZhbHVlT2YoKSxcclxuICAgICAgICAgICAgIGdldExvY2FsVGltZShnbXRPZmZzZXQpLnZhbHVlT2YoKSAtIGdldExvY2FsVGltZShnbXRPZmZzZXQsIGRhdGExLnN5cy5zdW5zZXQpLnZhbHVlT2YoKSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldFdlYXRoZXIxKCkge1xyXG4gIGNvbnN0IGVuZHBvaW50ID0gYCR7ZW5kcG9pbnQyfSZsYXQ9JHt3aW5kb3cubGF0aXR1ZGV9Jmxvbj0ke3dpbmRvdy5sb25naXR1ZGV9YDtcclxuXHJcbiAgZmV0Y2gocHJveHkgKyBlbmRwb2ludClcclxuICAgIC50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLmpzb24oKSlcclxuICAgIC50aGVuKGRhdGEgPT4gZGF0YTEgPSBkYXRhKVxyXG4gICAgLnRoZW4oZGlzcGxheUluZm8xKVxyXG59XHJcblxyXG5mdW5jdGlvbiBzdGFydCgpIHtcclxuICBjb25zdCBlbmRwb2ludCA9IGAke2VuZHBvaW50MX0mbGF0PSR7d2luZG93LmxhdGl0dWRlfSZsbmc9JHt3aW5kb3cubG9uZ2l0dWRlfWA7XHJcblxyXG4gIGZldGNoKGVuZHBvaW50KVxyXG4gICAgLnRoZW4ocmVzcG9uc2UgPT4gcmVzcG9uc2UuanNvbigpKVxyXG4gICAgLnRoZW4oZGF0YSA9PiB3aW5kb3cuZ210T2Zmc2V0ID0gZGF0YS5nbXRPZmZzZXQpXHJcbiAgICAudGhlbihnZXRXZWF0aGVyMSlcclxuICAgIC50aGVuKGdldFdlYXRoZXIyKVxyXG4gICAgLnRoZW4oZ2V0V2VhdGhlcjMpXHJcbiAgICAuY2F0Y2goc3RhcnQpXHJcbn1cclxuXHJcbnN0YXJ0KCk7XHJcbiIsImNvbnN0IGVuZHBvaW50MyA9ICdodHRwOi8vYXBpLm9wZW53ZWF0aGVybWFwLm9yZy9kYXRhLzIuNS9mb3JlY2FzdD9BUFBJRD03ZjY2MTkzOTRkNjI0ODNlODU2ZWE4MWRmMzk3OWY5NyZjbnQ9OCZ1bml0cz1tZXRyaWMnO1xyXG5sZXQgd2VhdGVyTGlzdCA9IFtdO1xyXG5sZXQgZGF0YTI7XHJcblxyXG5mdW5jdGlvbiBkaXNwbGF5SW5mbzIoKSB7XHJcbiAgd2VhdGVyTGlzdC5mb3JFYWNoKChpdGVtLCBpKSA9PiB7XHJcbiAgICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLmNvbnRlbnQtMiAuaXRlbS0ke2krMX1gKTtcclxuICAgIGNvbnN0IGljb24gPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYC5jb25kaXRpb24taWNvbmApO1xyXG5cclxuICAgIGVsZW1lbnQucXVlcnlTZWxlY3RvcignLnRpbWUnKS5pbm5lckhUTUwgPSBpdGVtLnRpbWU7XHJcbiAgICBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy50ZW1wJykuaW5uZXJIVE1MID0gTWF0aC5yb3VuZChpdGVtLm1haW4udGVtcCk7XHJcbiAgICBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5odW1pZGl0eScpLmlubmVySFRNTCA9IGl0ZW0ubWFpbi5odW1pZGl0eTtcclxuICAgIGVsZW1lbnQucXVlcnlTZWxlY3RvcignLnByZXNzdXJlJykuaW5uZXJIVE1MID0gTWF0aC5yb3VuZChpdGVtLm1haW4ucHJlc3N1cmUgKiAwLjc1KTtcclxuICAgIGVsZW1lbnQucXVlcnlTZWxlY3RvcignLndpbmQnKS5pbm5lckhUTUwgPSBNYXRoLnJvdW5kKGl0ZW0ud2luZC5zcGVlZCAqIDEwKSAvIDEwO1xyXG5cclxuICAgIGlmIChpdGVtLndlYXRoZXJbMF0uZGVzY3JpcHRpb24uc3BsaXQoJyAnKS5sZW5ndGggPiAyKSB7XHJcbiAgICAgIGl0ZW0ud2VhdGhlclswXS5tYWluID0gaXRlbS53ZWF0aGVyWzBdLm1haW5bMF0udG9Mb3dlckNhc2UoKSArIGl0ZW0ud2VhdGhlclswXS5tYWluLnN1YnN0cigxKTtcclxuICAgICAgZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY29uZGl0aW9uLWRlc2NyaXB0aW9uJykuaW5uZXJIVE1MID0gaXRlbS53ZWF0aGVyWzBdLm1haW47XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb25kaXRpb24tZGVzY3JpcHRpb24nKS5pbm5lckhUTUwgPSBpdGVtLndlYXRoZXJbMF0uZGVzY3JpcHRpb247XHJcbiAgICB9XHJcblxyXG4gICAgaXRlbS5jbGFzcyA9IChpdGVtLnRpbWUuaW5kZXhPZignTW9ybmluZycpICE9PSAtMSB8fCBpdGVtLnRpbWUuaW5kZXhPZignRGF5JykgIT09IC0xKSA/ICd3aS1vd20tZGF5LScgOiAnd2ktb3dtLW5pZ2h0LSc7XHJcblxyXG4gICAgaWYgKGl0ZW0ud2VhdGhlclswXS5pZCA9PT0gNzAxKSB7XHJcbiAgICAgIGljb24uY2xhc3NMaXN0LnJlbW92ZShpY29uLmNsYXNzTGlzdC5pdGVtKDIpKTtcclxuXHJcbiAgICAgIGlmIChpdGVtLmNsYXNzID09PSAnd2ktb3dtLWRheS0nKSB7XHJcbiAgICAgICAgaWNvbi5jbGFzc0xpc3QuYWRkKCd3aS1kYXktZm9nJyk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaWNvbi5jbGFzc0xpc3QuYWRkKCd3aS1uaWdodC1mb2cnKTtcclxuICAgICAgfVxyXG5cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGljb24uY2xhc3NMaXN0LnJlbW92ZShpY29uLmNsYXNzTGlzdC5pdGVtKDIpKTtcclxuICAgICAgaWNvbi5jbGFzc0xpc3QuYWRkKGl0ZW0uY2xhc3MgKyBpdGVtLndlYXRoZXJbMF0uaWQpO1xyXG4gICAgfVxyXG5cclxuICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gcGFyc2VXZWF0aGVyRGF0YSgpIHtcclxuICBsZXQgbW9ybmluZ1dlYXRoZXJJbmZvO1xyXG4gIGxldCBkYXlXZWF0aGVySW5mbztcclxuICBsZXQgZXZlbmluZ1dlYXRoZXJJbmZvO1xyXG4gIGxldCBuaWdodFdlYXRoZXJJbmZvO1xyXG5cclxuICBkYXRhMi5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICBjb25zdCB0aW1lID0gZ2V0TG9jYWxUaW1lKHdpbmRvdy5nbXRPZmZzZXQsIGl0ZW0uZHQpO1xyXG5cclxuICAgIGlmICh0aW1lLmdldEhvdXJzKCkgPT0gNyB8fCB0aW1lLmdldEhvdXJzKCkgPT0gOCB8fCB0aW1lLmdldEhvdXJzKCkgPT0gOSB8fCB0aW1lLmdldEhvdXJzKCkgPT0gMTApIG1vcm5pbmdXZWF0aGVySW5mbyA9IGl0ZW07XHJcbiAgICBpZiAodGltZS5nZXRIb3VycygpID09IDEzIHx8IHRpbWUuZ2V0SG91cnMoKSA9PSAxNCB8fCB0aW1lLmdldEhvdXJzKCkgPT0gMTUgfHwgdGltZS5nZXRIb3VycygpID09IDE2KSBkYXlXZWF0aGVySW5mbyA9IGl0ZW07XHJcbiAgICBpZiAodGltZS5nZXRIb3VycygpID09IDE5IHx8IHRpbWUuZ2V0SG91cnMoKSA9PSAyMCB8fCB0aW1lLmdldEhvdXJzKCkgPT0gMjEgfHwgdGltZS5nZXRIb3VycygpID09IDIyKSBldmVuaW5nV2VhdGhlckluZm8gPSBpdGVtO1xyXG4gICAgaWYgKHRpbWUuZ2V0SG91cnMoKSA9PSAxIHx8IHRpbWUuZ2V0SG91cnMoKSA9PSAyIHx8IHRpbWUuZ2V0SG91cnMoKSA9PSAzIHx8IHRpbWUuZ2V0SG91cnMoKSA9PSA0KSBuaWdodFdlYXRoZXJJbmZvID0gaXRlbTtcclxuICB9KTtcclxuXHJcbiAgY29uc3QgY3VycmVudFRpbWUgPSBnZXRMb2NhbFRpbWUoZ210T2Zmc2V0KS5nZXRIb3VycygpO1xyXG5cclxuICBpZiAoY3VycmVudFRpbWUgPj0gMCAmJiBjdXJyZW50VGltZSA8IDcpIHtcclxuICAgIHdlYXRlckxpc3RbMF0gPSBtb3JuaW5nV2VhdGhlckluZm87XHJcbiAgICB3ZWF0ZXJMaXN0WzBdLnRpbWUgPSAnVGhpcyBNb3JuaW5nJztcclxuXHJcbiAgICB3ZWF0ZXJMaXN0WzFdID0gZGF5V2VhdGhlckluZm87XHJcbiAgICB3ZWF0ZXJMaXN0WzFdLnRpbWUgPSAnVGhpcyBEYXknO1xyXG5cclxuICAgIHdlYXRlckxpc3RbMl0gPSBldmVuaW5nV2VhdGhlckluZm87XHJcbiAgICB3ZWF0ZXJMaXN0WzJdLnRpbWUgPSAnVGhpcyBFdmVuaW5nJztcclxuXHJcbiAgICB3ZWF0ZXJMaXN0WzNdID0gbmlnaHRXZWF0aGVySW5mbztcclxuICAgIHdlYXRlckxpc3RbM10udGltZSA9ICdUb21vcnJvdyBOaWdodCc7XHJcbiAgfVxyXG5cclxuICBpZiAoY3VycmVudFRpbWUgPj0gNyAmJiBjdXJyZW50VGltZSA8IDEzKSB7XHJcbiAgICB3ZWF0ZXJMaXN0WzBdID0gZGF5V2VhdGhlckluZm87XHJcbiAgICB3ZWF0ZXJMaXN0WzBdLnRpbWUgPSAnVGhpcyBEYXknO1xyXG5cclxuICAgIHdlYXRlckxpc3RbMV0gPSBldmVuaW5nV2VhdGhlckluZm87XHJcbiAgICB3ZWF0ZXJMaXN0WzFdLnRpbWUgPSAnVGhpcyBFdmVuaW5nJztcclxuXHJcbiAgICB3ZWF0ZXJMaXN0WzJdID0gbmlnaHRXZWF0aGVySW5mbztcclxuICAgIHdlYXRlckxpc3RbMl0udGltZSA9ICdUb21vcnJvdyBOaWdodCc7XHJcblxyXG4gICAgd2VhdGVyTGlzdFszXSA9IG1vcm5pbmdXZWF0aGVySW5mbztcclxuICAgIHdlYXRlckxpc3RbM10udGltZSA9ICdUb21vcnJvdyBNb3JuaW5nJztcclxuICB9XHJcblxyXG4gIGlmIChjdXJyZW50VGltZSA+PSAxMyAmJiBjdXJyZW50VGltZSA8IDE5KSB7XHJcbiAgICB3ZWF0ZXJMaXN0WzBdID0gZXZlbmluZ1dlYXRoZXJJbmZvO1xyXG4gICAgd2VhdGVyTGlzdFswXS50aW1lID0gJ1RoaXMgRXZlbmluZyc7XHJcblxyXG4gICAgd2VhdGVyTGlzdFsxXSA9IG5pZ2h0V2VhdGhlckluZm87XHJcbiAgICB3ZWF0ZXJMaXN0WzFdLnRpbWUgPSAnVG9tb3Jyb3cgTmlnaHQnO1xyXG5cclxuICAgIHdlYXRlckxpc3RbMl0gPSBtb3JuaW5nV2VhdGhlckluZm87XHJcbiAgICB3ZWF0ZXJMaXN0WzJdLnRpbWUgPSAnVG9tb3Jyb3cgTW9ybmluZyc7XHJcblxyXG4gICAgd2VhdGVyTGlzdFszXSA9IGRheVdlYXRoZXJJbmZvO1xyXG4gICAgd2VhdGVyTGlzdFszXS50aW1lID0gJ1RvbW9ycm93IERheSc7XHJcbiAgfVxyXG5cclxuICBpZiAoY3VycmVudFRpbWUgPj0gMTkgJiYgY3VycmVudFRpbWUgPD0gMjMpIHtcclxuICAgIHdlYXRlckxpc3RbMF0gPSBuaWdodFdlYXRoZXJJbmZvO1xyXG4gICAgd2VhdGVyTGlzdFswXS50aW1lID0gJ1RvbW9ycm93IE5pZ2h0JztcclxuXHJcbiAgICB3ZWF0ZXJMaXN0WzFdID0gbW9ybmluZ1dlYXRoZXJJbmZvO1xyXG4gICAgd2VhdGVyTGlzdFsxXS50aW1lID0gJ1RvbW9ycm93IE1vcm5pbmcnO1xyXG5cclxuICAgIHdlYXRlckxpc3RbMl0gPSBkYXlXZWF0aGVySW5mbztcclxuICAgIHdlYXRlckxpc3RbMl0udGltZSA9ICdUb21vcnJvdyBEYXknO1xyXG5cclxuICAgIHdlYXRlckxpc3RbM10gPSBldmVuaW5nV2VhdGhlckluZm87XHJcbiAgICB3ZWF0ZXJMaXN0WzNdLnRpbWUgPSAnVG9tb3Jyb3cgRXZlbmluZyc7XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRXZWF0aGVyMigpIHtcclxuICBjb25zdCBlbmRwb2ludCA9IGAke2VuZHBvaW50M30mbGF0PSR7d2luZG93LmxhdGl0dWRlfSZsb249JHt3aW5kb3cubG9uZ2l0dWRlfWA7XHJcblxyXG4gIGZldGNoKHByb3h5ICsgZW5kcG9pbnQpXHJcbiAgICAudGhlbihyZXNwb25zZSA9PiByZXNwb25zZS5qc29uKCkpXHJcbiAgICAudGhlbihkYXRhID0+IGRhdGEyID0gZGF0YS5saXN0KVxyXG4gICAgLnRoZW4ocGFyc2VXZWF0aGVyRGF0YSlcclxuICAgIC50aGVuKGRpc3BsYXlJbmZvMilcclxufVxyXG4iLCJjb25zdCBlbmRwb2ludDQgPSAnaHR0cDovL2FwaS5vcGVud2VhdGhlcm1hcC5vcmcvZGF0YS8yLjUvZm9yZWNhc3QvZGFpbHk/dW5pdHM9bWV0cmljJmNudD03JmFwcGlkPTdmNjYxOTM5NGQ2MjQ4M2U4NTZlYTgxZGYzOTc5Zjk3JztcclxuXHJcbmxldCBkYXRhMztcclxuXHJcbmZ1bmN0aW9uIGRpc3BsYXlJbmZvMygpIHtcclxuICBjb25zdCBmb3JtYXR0ZXIgPSBuZXcgSW50bC5EYXRlVGltZUZvcm1hdCgnZW4tR0InLCB7XHJcbiAgICB0aW1lem9uZTogJ1VUQycsXHJcbiAgICB3ZWVrZGF5OiAnbG9uZycsXHJcbiAgICBtb250aDogJ2xvbmcnLFxyXG4gICAgZGF5OiAnbnVtZXJpYydcclxuICB9KTtcclxuXHJcbiAgZGF0YTMuc2hpZnQoKTtcclxuXHJcbiAgZGF0YTMuZm9yRWFjaCgoaXRlbSwgaSkgPT4ge1xyXG4gICAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC5jb250ZW50LTMgLml0ZW0tJHtpKzF9YCk7XHJcbiAgICBjb25zdCBkYXRlID0gZ2V0TG9jYWxUaW1lKHdpbmRvdy5nbXRPZmZzZXQsIGl0ZW0uZHQpO1xyXG4gICAgY29uc3QgZGF0ZUFycmF5ID0gZm9ybWF0dGVyLmZvcm1hdChkYXRlKS5zcGxpdCgnICcpO1xyXG5cclxuICAgIGVsZW1lbnQucXVlcnlTZWxlY3RvcignLmRheScpLmlubmVySFRNTCA9IGAke2RhdGVBcnJheVswXX0sICR7ZGF0ZUFycmF5WzFdfSAke2RhdGVBcnJheVsyXX1gO1xyXG4gICAgZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcubWF4LXRlbXAnKS5pbm5lckhUTUwgPSBNYXRoLnJvdW5kKGl0ZW0udGVtcC5tYXgpO1xyXG4gICAgZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcubWluLXRlbXAnKS5pbm5lckhUTUwgPSBNYXRoLnJvdW5kKGl0ZW0udGVtcC5taW4pO1xyXG4gICAgZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcucHJlc3N1cmUnKS5pbm5lckhUTUwgPSBNYXRoLnJvdW5kKGl0ZW0ucHJlc3N1cmUgKiAwLjc1KTtcclxuICAgIGVsZW1lbnQucXVlcnlTZWxlY3RvcignLmNsb3VkaW5lc3MnKS5pbm5lckhUTUwgPSBpdGVtLmNsb3VkcztcclxuICAgIGVsZW1lbnQucXVlcnlTZWxlY3RvcignLndpbmQnKS5pbm5lckhUTUwgPSBNYXRoLnJvdW5kKGl0ZW0uc3BlZWQgKiAxMCkgLyAxMDtcclxuXHJcbiAgICBpZiAoaXRlbS53ZWF0aGVyWzBdLmRlc2NyaXB0aW9uLnNwbGl0KCcgJykubGVuZ3RoID4gMikge1xyXG4gICAgICBpdGVtLndlYXRoZXJbMF0ubWFpbiA9IGl0ZW0ud2VhdGhlclswXS5tYWluWzBdLnRvTG93ZXJDYXNlKCkgKyBpdGVtLndlYXRoZXJbMF0ubWFpbi5zdWJzdHIoMSk7XHJcbiAgICAgIGVsZW1lbnQucXVlcnlTZWxlY3RvcignLmNvbmRpdGlvbi1kZXNjcmlwdGlvbicpLmlubmVySFRNTCA9IGl0ZW0ud2VhdGhlclswXS5tYWluO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY29uZGl0aW9uLWRlc2NyaXB0aW9uJykuaW5uZXJIVE1MID0gaXRlbS53ZWF0aGVyWzBdLmRlc2NyaXB0aW9uO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGljb24gPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb25kaXRpb24taWNvbicpO1xyXG5cclxuICAgIGlmIChpdGVtLndlYXRoZXJbMF0uaWQgPT09IDcwMSkge1xyXG4gICAgICBpY29uLmNsYXNzTGlzdC5yZW1vdmUoaWNvbi5jbGFzc0xpc3QuaXRlbSgyKSk7XHJcbiAgICAgIGljb24uY2xhc3NMaXN0LmFkZCgnd2ktZm9nJyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBpY29uLmNsYXNzTGlzdC5yZW1vdmUoaWNvbi5jbGFzc0xpc3QuaXRlbSgyKSk7XHJcbiAgICAgIGljb24uY2xhc3NMaXN0LmFkZCgnd2ktb3dtLScgKyBpdGVtLndlYXRoZXJbMF0uaWQpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRXZWF0aGVyMygpIHtcclxuICBjb25zdCBlbmRwb2ludCA9IGAke2VuZHBvaW50NH0mbGF0PSR7d2luZG93LmxhdGl0dWRlfSZsb249JHt3aW5kb3cubG9uZ2l0dWRlfWA7XHJcblxyXG4gIGZldGNoKHByb3h5ICsgZW5kcG9pbnQpXHJcbiAgICAudGhlbihyZXNwb25zZSA9PiByZXNwb25zZS5qc29uKCkpXHJcbiAgICAudGhlbihkYXRhID0+IGRhdGEzID0gZGF0YS5saXN0KVxyXG4gICAgLnRoZW4oZGlzcGxheUluZm8zKVxyXG59XHJcbiIsImNvbnN0IGlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNpdHktc2VhcmNoJyk7XHJcbmNvbnN0IGdlb0J0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5nZW8tYnV0dG9uJyk7XHJcblxyXG5pbnB1dC5hZGRFdmVudExpc3RlbmVyKCdmb2N1cycsICgpID0+IGlucHV0LnNlbGVjdCgpKTtcclxuXHJcbmZ1bmN0aW9uIGluaXQoKSB7XHJcbiAgY29uc3QgYXV0b2NvbXBsZXRlID0gbmV3IGdvb2dsZS5tYXBzLnBsYWNlcy5BdXRvY29tcGxldGUoaW5wdXQsIG9wdGlvbnMpO1xyXG4gIGNvbnN0IG9wdGlvbnMgPSB7XHJcbiAgICB0eXBlczogWycoY2l0aWVzKSddXHJcbiAgfTtcclxuXHJcbiAgYXV0b2NvbXBsZXRlLmFkZExpc3RlbmVyKCdwbGFjZV9jaGFuZ2VkJywgKCkgPT4ge1xyXG4gICAgY29uc3QgcGxhY2UgPSBhdXRvY29tcGxldGUuZ2V0UGxhY2UoKTtcclxuXHJcbiAgICBwbGFjZS5hZGRyZXNzX2NvbXBvbmVudHMuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICBpZiAoaXRlbS50eXBlc1swXSA9PSAnbG9jYWxpdHknIHx8IGl0ZW0udHlwZXNbMV0gPT0gJ2xvY2FsaXR5JyB8fCBpdGVtLnR5cGVzWzJdID09ICdsb2NhbGl0eScpIHtcclxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29udGVudC0xIC5jaXR5JykuaW5uZXJIVE1MID0gaXRlbS5zaG9ydF9uYW1lO1xyXG4gICAgICAgIGlmIChpdGVtLnNob3J0X25hbWUgPT0gJ1NGJykgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbnRlbnQtMSAuY2l0eScpLmlubmVySFRNTCA9ICdTYW4gRnJhbmNpc2NvJztcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKGl0ZW0udHlwZXNbMF0gPT0gJ2NvdW50cnknIHx8IGl0ZW0udHlwZXNbMV0gPT0gJ2NvdW50cnknIHx8IGl0ZW0udHlwZXNbMl0gPT0gJ2NvdW50cnknKSB7XHJcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbnRlbnQtMSAuY291bnRyeScpLmlubmVySFRNTCA9IGl0ZW0ubG9uZ19uYW1lO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICB3aW5kb3cubGF0aXR1ZGUgPSBwbGFjZS5nZW9tZXRyeS5sb2NhdGlvbi5sYXQoKTtcclxuICAgIHdpbmRvdy5sb25naXR1ZGUgPSBwbGFjZS5nZW9tZXRyeS5sb2NhdGlvbi5sbmcoKTtcclxuXHJcbiAgICBzdGFydCgpO1xyXG5cclxuICB9KTtcclxufVxyXG5cclxuZ2VvQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuICBpZiAoJ2dlb2xvY2F0aW9uJyBpbiBuYXZpZ2F0b3IpIHtcclxuICAgIG5hdmlnYXRvci5nZW9sb2NhdGlvbi5nZXRDdXJyZW50UG9zaXRpb24oKHBvc2l0aW9uKSA9PiB7XHJcbiAgICAgIGlucHV0LnZhbHVlID0gJyc7XHJcblxyXG4gICAgICB3aW5kb3cubGF0aXR1ZGUgPSBwb3NpdGlvbi5jb29yZHMubGF0aXR1ZGU7XHJcbiAgICAgIHdpbmRvdy5sb25naXR1ZGUgPSBwb3NpdGlvbi5jb29yZHMubG9uZ2l0dWRlO1xyXG5cclxuICAgICAgZmV0Y2goYGh0dHBzOi8vbWFwcy5nb29nbGVhcGlzLmNvbS9tYXBzL2FwaS9nZW9jb2RlL2pzb24/a2V5PUFJemFTeURkM1FHWmFqLWJURG1WN3BmSkhobjV1U0xDYVgxVVBDOCZsYW5ndWFnZT1lbiZsYXRsbmc9JHtwb3NpdGlvbi5jb29yZHMubGF0aXR1ZGV9LCR7cG9zaXRpb24uY29vcmRzLmxvbmdpdHVkZX1gKVxyXG4gICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLmpzb24oKSlcclxuICAgICAgICAudGhlbigoZGF0YSkgPT4ge1xyXG4gICAgICAgICAgZGF0YS5yZXN1bHRzWzNdLmFkZHJlc3NfY29tcG9uZW50cy5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChpdGVtLnR5cGVzWzBdID09ICdsb2NhbGl0eScgfHwgaXRlbS50eXBlc1sxXSA9PSAnbG9jYWxpdHknIHx8IGl0ZW0udHlwZXNbMl0gPT0gJ2xvY2FsaXR5Jykge1xyXG4gICAgICAgICAgICAgIGlmIChpdGVtLnNob3J0X25hbWUgPT0gJ1NGJykge1xyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbnRlbnQtMSAuY2l0eScpLmlubmVySFRNTCA9ICdTYW4gRnJhbmNpc2NvJztcclxuICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbnRlbnQtMSAuY2l0eScpLmlubmVySFRNTCA9IGl0ZW0uc2hvcnRfbmFtZTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChpdGVtLnR5cGVzWzBdID09ICdjb3VudHJ5JyB8fCBpdGVtLnR5cGVzWzFdID09ICdjb3VudHJ5JyB8fCBpdGVtLnR5cGVzWzJdID09ICdjb3VudHJ5Jykge1xyXG4gICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb250ZW50LTEgLmNvdW50cnknKS5pbm5lckhUTUwgPSBpdGVtLmxvbmdfbmFtZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAudGhlbihzdGFydClcclxuICAgIH0pO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBhbGVydCgnU29ycnksIGdlb2xvY2F0aW9uIGlzIG5vdCBhdmFpbGFibGUnKTtcclxuICB9XHJcbn0pO1xyXG4iXX0=
